<!doctype html><link rel=stylesheet href=style.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>GXAirCom</title><script language=javascript>var pageNumber=10,bHasVario=0,calibBtnState=0,wsMode=0;const wsModeEn=1,wsModeBme=2,wsModeRain=4,wsModeDS18B20=8;function setFts(){document.getElementById("traccarsrv").value="http://tracking.fivl.it:5055/"}function setVis(){calibBtnState==0?(document.getElementById("accCalib1").style.display="none",document.getElementById("accCalib2").style.display="none",document.getElementById("accCalib3").style.display="none",document.getElementById("accCalib4").style.display="none"):(document.getElementById("accCalib1").style.display="",document.getElementById("accCalib2").style.display="",document.getElementById("accCalib3").style.display="",document.getElementById("accCalib4").style.display=""),document.getElementById("VisGsScreen").style.display="none",document.getElementById("VisGsSrO").style.display="none",document.getElementById("VisGsSsO").style.display="none",document.getElementById("VisFrequ").style.display="none",document.getElementById("VisAWUS").style.display="none",document.getElementById("VisAWFFNT").style.display="none",document.getElementById("VisWD").style.display="none",document.getElementById("visAxOffset").style.display="none",document.getElementById("visAyOffset").style.display="none",document.getElementById("visAzOffset").style.display="none",document.getElementById("visGxOffset").style.display="none",document.getElementById("visGyOffset").style.display="none",document.getElementById("visGzOffset").style.display="none",document.getElementById("visAccTemp1").style.display="none",document.getElementById("visAccTemp2").style.display="none",document.getElementById("visSigmaP").style.display="none",document.getElementById("visSigmaA").style.display="none",document.getElementById("VisFuelSensor").style.display="none",document.getElementById("VisMqtt").style.display="none",document.getElementById("VisOwnWs").style.display="none",document.getElementById("VisWDBme").style.display="none",document.getElementById("VisAutoUpdate").style.display="none",document.getElementById("VisADS1015Exp").style.display="none",document.getElementById("VisADS1015").style.display="none",document.getElementById("VisWifiOff").style.display="none",document.getElementById("VisAvgFNT").style.display="none",document.getElementById("VisAvgWD").style.display="none",document.getElementById("VisGSUpload1").style.display="none",document.getElementById("VisGSUpload2").style.display="none",document.getElementById("VisWU").style.display="none",document.getElementById("VisWI").style.display="none",document.getElementById("wificonnect").value!=2&&(document.getElementById("VisWifiOff").style.display=""),document.getElementById("setView").value==SETTING_EXPERT&&(document.getElementById("VisFrequ").style.display=""),document.getElementById("gsPs").value==1&&(document.getElementById("VisGsSrO").style.display="",document.getElementById("VisGsSsO").style.display=""),document.getElementById("useMPU").checked?(document.getElementById("KfP").innerHTML="Kalman filter pressure-value (default 0.3)",document.getElementById("KfA").innerHTML="Kalman filter accelerator-value (default 0.3)"):(document.getElementById("KfP").innerHTML="Kalman filter pressure-value (default 0.1)",document.getElementById("KfA").innerHTML="Kalman filter accelerator-value (default 0.6)"),document.getElementById("setView").value>=SETTING_ADVANCED&&(document.getElementById("visSigmaP").style.display="",document.getElementById("visSigmaA").style.display=""),document.getElementById("setView").value==SETTING_EXPERT&&(document.getElementById("visAxOffset").style.display="",document.getElementById("visAyOffset").style.display="",document.getElementById("visAzOffset").style.display="",document.getElementById("visGxOffset").style.display="",document.getElementById("visGyOffset").style.display="",document.getElementById("visGzOffset").style.display="",document.getElementById("visAccTemp1").style.display="",document.getElementById("visAccTemp2").style.display=""),document.getElementById("mode").value==1?(document.getElementById("disp").value!=0&&(document.getElementById("VisGsScreen").style.display=""),document.getElementById("VisOwnWs").style.display="",document.getElementById("setView").value>=SETTING_ADVANCED&&(document.getElementById("VisAWUS").style.display="",document.getElementById("setView").value==SETTING_EXPERT&&(document.getElementById("VisAWFFNT").style.display="")),wsMode&wsModeEn?(document.getElementById("VisAvgFNT").style.display="",document.getElementById("VisAvgWD").style.display="",document.getElementById("VisWD").style.display="",document.getElementById("wificonnect").value==2&&(document.getElementById("VisWU").style.display="",document.getElementById("VisWI").style.display=""),document.getElementById("tWu").innerHTML="Weather Underground Upload",document.getElementById("tWuEnable").innerHTML="enable sending weather-data to WU",document.getElementById("tWuKey").innerHTML="KEY",document.getElementById("tWuIntervall").innerHTML="upload-interval [s] (default 300 -> 5min)",document.getElementById("tWdUpload").innerHTML="Weather Upload settings",(wsMode&wsModeBme||wsMode&wsModeDS18B20)&&(document.getElementById("VisWDBme").style.display=""),document.getElementById("wdAnemo").value==2&&(document.getElementById("VisADS1015").style.display=""),document.getElementById("wdAnemo").value==2&&document.getElementById("setView").value==SETTING_EXPERT&&(document.getElementById("VisADS1015Exp").style.display="")):(document.getElementById("tWu").innerHTML="Broadcast weather-underground data to FANET",document.getElementById("tWuEnable").innerHTML="enable sending wu-data to FANET",document.getElementById("tWuKey").innerHTML="API-KEY (not station-Key)",document.getElementById("wificonnect").value==2&&(document.getElementById("VisWU").style.display=""),document.getElementById("tWdUpload").innerHTML="Weather query settings",document.getElementById("tWuIntervall").innerHTML="intervall for getting data [s]"),document.getElementById("VisMqtt").style.display="",document.getElementById("VisAirCraftType").style.display="none",document.getElementById("tName").innerHTML="Ground Station name",document.getElementById("VisGS").style.display="",document.getElementById("wificonnect").value==2&&(document.getElementById("VisGSUpload1").style.display="",document.getElementById("VisGSUpload2").style.display=""),document.getElementById("VisVario").style.display="none",document.getElementById("VisFanetTracking").style.display="none"):(document.getElementById("VisAirCraftType").style.display="",document.getElementById("tName").innerHTML="Pilot name",document.getElementById("VisGS").style.display="none",bHasVario==0?document.getElementById("VisVario").style.display="none":document.getElementById("VisVario").style.display="",document.getElementById("VisFuelSensor").style.display=""),document.getElementById("output").value==1?(document.getElementById("VisUdpIp").style.display="",document.getElementById("VisUdpPort").style.display=""):(document.getElementById("VisUdpIp").style.display="none",document.getElementById("VisUdpPort").style.display="none"),document.getElementById("wificonnect").value==0?(document.getElementById("VisWifiSsid").style.display="none",document.getElementById("VisWifiPwd").style.display="none",document.getElementById("VisWifiApOff").style.display="none"):(document.getElementById("VisWifiSsid").style.display="",document.getElementById("VisWifiPwd").style.display="",document.getElementById("VisExtPowerSw").style.display="",document.getElementById("VisWifiApOff").style.display=""),document.getElementById("wdModeEnable").checked=wsMode&wsModeEn,document.getElementById("wdModeHasBME").checked=wsMode&wsModeBme,document.getElementById("wdModeRainSensor").checked=wsMode&wsModeRain,document.getElementById("wdModeDS18B20").checked=wsMode&wsModeDS18B20}function setWsMode(){console.log("in function setWsMode"),wsMode=0,document.getElementById("wdModeEnable").checked&&(wsMode+=1),document.getElementById("wdModeHasBME").checked&&(wsMode+=2),document.getElementById("wdModeRainSensor").checked&&(wsMode+=4),document.getElementById("wdModeDS18B20").checked&&(wsMode+=8),setVis()}function getWsMode(){var e=0;return document.getElementById("wdModeEnable").checked&&(e+=1),document.getElementById("wdModeHasBME").checked&&(e+=2),document.getElementById("wdModeRainSensor").checked&&(e+=4),document.getElementById("wdModeDS18B20").checked&&(e+=8),e}function setCalibState(e){var t="#47c266",n="#d43535";document.getElementById("Z1").bgColor=e&1?t:n,document.getElementById("Z2").bgColor=e&2?t:n,document.getElementById("Y1").bgColor=e&4?t:n,document.getElementById("Y2").bgColor=e&8?t:n,document.getElementById("X1").bgColor=e&16?t:n,document.getElementById("X2").bgColor=e&32?t:n}function getRfMode(){var e=0;return document.getElementById("FntRx").checked&&(e+=1),document.getElementById("FntTx").checked&&(e+=2),document.getElementById("FlarmRx").checked&&(e+=4),document.getElementById("FlarmTx").checked&&(e+=8),e}function setRfMode(t){console.log("RF-Mode="+t),e=document.getElementById("FntRx"),t&1?e.checked=!0:e.checked=!1,e=document.getElementById("FntTx"),t&2?e.checked=!0:e.checked=!1,e=document.getElementById("FlarmRx"),t&4?e.checked=!0:e.checked=!1,e=document.getElementById("FlarmTx"),t&8?e.checked=!0:e.checked=!1}function getMQTTMode(){var e=0;return document.getElementById("MqttEn").checked&&(e+=1),document.getElementById("MqttWd").checked&&(e+=2),e}function setMQTTMode(t){console.log("setMQTTMode-Mode="+t),e=document.getElementById("MqttEn"),t&1?e.checked=!0:e.checked=!1,e=document.getElementById("MqttWd"),t&2?e.checked=!0:e.checked=!1}function getWifiMode(){var e=0;return document.getElementById("wifiModeApOff").checked&&(e+=1),document.getElementById("wifiEn").checked==!1&&(e+=2),e}function setWifiMode(t){console.log("Wifi-Mode="+t),e=document.getElementById("wifiModeApOff"),t&1?e.checked=!0:e.checked=!1,e=document.getElementById("wifiEn"),t&2?e.checked=!1:e.checked=!0}function getOGNMode(){var e=0;return document.getElementById("ognlive").checked&&(e+=1),document.getElementById("ognWeather").checked&&(e+=2),document.getElementById("ognFwdWeather").checked&&(e+=4),document.getElementById("ognNameData").checked&&(e+=8),e}function setOGNMode(t){console.log("OGN-Mode="+t),e=document.getElementById("ognlive"),t&1?e.checked=!0:e.checked=!1,e=document.getElementById("ognWeather"),t&2?e.checked=!0:e.checked=!1,e=document.getElementById("ognFwdWeather"),t&4?e.checked=!0:e.checked=!1,e=document.getElementById("ognNameData"),t&8?e.checked=!0:e.checked=!1}function setBtnCalib(t,n){switch(e=document.getElementById(t),n){case 0:e.innerText="calib";break;case 1:e.innerText="calibrating, please wait ...";break;case 2:e.innerText="calibration ready --> Board will reboot",document.getElementById("btnsave").innerText="rebooting ...";var s=5e3;setTimeout(callMainPage,s);break;case 10:e.innerText="press when done";break;case 11:e.innerText="calibrating";break;case 255:e.innerText="error calibration";break;default:break}}function calibGyro(){setBtnCalib("btnCalibGyro",1);var e={calibGyro:1};doSend(JSON.stringify(e))}function setBattVoltOffs(){var e={BATOFFS:Number(document.getElementById("BATOFFS").value)};doSend(JSON.stringify(e))}function calibAcc(){var t,e=1;calibBtnState==10&&(e=11),calibBtnState==0&&setCalibState(0),setBtnCalib("btnCalibAcc",e),t={calibAcc:e},doSend(JSON.stringify(t))}function setBtnGPS(t){switch(e=document.getElementById("btnGPS"),t){case 0:e.innerText="config GPS";break;case 1:e.innerText="configure GPS, please wait ...";break;case 2:e.innerText="GPS ready --> Board will reboot",document.getElementById("btnsave").innerText="rebooting ...";var n=5e3;setTimeout(callMainPage,n);break;case 255:e.innerText="error configure GPS";break;default:break}}function setBtnGetGpsPos(t){switch(e=document.getElementById("btnGetGpsPos"),t){case 0:e.innerText="Get GPS-Position";break;case 1:e.innerText="start searching GPS-signal";break;case 2:e.innerText="waiting for GPS-Fix, please wait ...";break;case 3:e.innerText="GPS fix OK --> Board will reboot",document.getElementById("btnsave").innerText="rebooting ...";var n=5e3;setTimeout(callMainPage,n);break;case 255:e.innerText="error configure GPS";break;default:break}}function getGpsPos(){setBtnGetGpsPos(1);var e={getGpsPos:1};doSend(JSON.stringify(e))}function sendUbloxConfig(){setBtnGPS(1);var e={configGPS:1};doSend(JSON.stringify(e))}function onlyLetters(e){return e.match("^[A-Za-z0-9]+$")}function openGeoidCalc(){var e="https://geographiclib.sourceforge.io/cgi-bin/GeoidEval?input="+document.getElementById("gslat").value+"+"+document.getElementById("gslon").value+"&option=Submit",t=window.open(e,"_blank");t.focus()}function checkValues(){if(document.getElementById("mode").value==1){var e=document.getElementById("PilotName").value;if(e.length<3||e.length>9||!onlyLetters(e))return window.alert(`Error Ground Station name\r
Minimum length for name is 3 characters\r
Maximum length for name is 9 characters\r
Use chars and numbers only (A-Z, a-z and 0-9)`),!1}return!0}function importJson(){console.log("start reading file:");const e=document.getElementById("importJson");let t=0;for(const n of e.files)t+=n.size;if(!e.files.length){console.log("No file selected!");return}let n=e.files[0],s=new FileReader;const o=this;console.log("reading "+t+" Bytes, file:"+n),s.onload=function(e){parseJson(e.target.result)},s.readAsText(n),e.value=""}function exportJson(){console.log("export JSON");var e={};getValue(e,["setView","board","Frequ","disp","dispRot","type","mode","fntMode","fntPin","PilotName","expwsw","fuelSensor","AUTOUPDATE","gslat","gslon","gsalt","gsGeoAlt","gsScr","gsPs","GsSrO","GsSsO","MinBatPerc","restartBattPerc","wdAnemo","wdAnemoAdsGain","wdAnemoAdsWSpeedMinVoltage","wdAnemoAdsWSpeedMaxVoltage","wdAnemoAdsWDirMinVoltage","wdAnemoAdsWDirMaxVoltage","wdAnemoAdsWSpeedMinSpeed","wdAnemoAdsWSpeedMaxSpeed","wdAnemoAdsWDirMinDir","wdAnemoAdsWDirMaxDir","wdAnemoAdsVDivR1","wdAnemoAdsVDivR2","appw","wificonnect","ssid","password","wifioff","output","oSERIAL","oGPS","oFlarm","oFanet","oVario","awlive","UDPServerIP","UDPSendPort","traccar_live","traccarsrv","sigmaP","sigmaA","vSinkTh","vClimbTh","vNClimbSens","vVol","vBeepFly","useMPU","axOffset","ayOffset","azOffset","gxOffset","gyOffset","gzOffset","t[0]","z[0]","sFWD","wdTempOffset","wdWDirOffset","WUUlEnable","WUUlID","WUUlKEY","WIUlEnable","WIUlID","WIUlKEY","WFFNT","WIFNT","WFWU","WIWU","MqttServer","MqttPort","MqttPw","GSMAPN","GSMUSER","GSMPWD","GSMMODE","GSMPREF","NBIOT","CATM"]),e.F2WuF=[FntIdHex2Dec(_value("F2WuF0")).toString(),FntIdHex2Dec(_value("F2WuF1")).toString(),FntIdHex2Dec(_value("F2WuF2")).toString(),FntIdHex2Dec(_value("F2WuF3")).toString(),FntIdHex2Dec(_value("F2WuF4")).toString()],e.F2WuI=[_value("F2WuI0"),_value("F2WuI1"),_value("F2WuI2"),_value("F2WuI3"),_value("F2WuI4")],e.F2WuK=[_value("F2WuK0"),_value("F2WuK1"),_value("F2WuK2"),_value("F2WuK3"),_value("F2WuK4")],e.F2WiF=[FntIdHex2Dec(_value("F2WiF0")).toString(),FntIdHex2Dec(_value("F2WiF1")).toString(),FntIdHex2Dec(_value("F2WiF2")).toString(),FntIdHex2Dec(_value("F2WiF3")).toString(),FntIdHex2Dec(_value("F2WiF4")).toString()],e.F2WiI=[_value("F2WiI0"),_value("F2WiI1"),_value("F2WiI2"),_value("F2WiI3"),_value("F2WiI4")],e.F2WiK=[_value("F2WiK0"),_value("F2WiK1"),_value("F2WiK2"),_value("F2WiK3"),_value("F2WiK4")],e.ognlive=getOGNMode(),e.WIFI_MODE=getWifiMode(),e.RFM=getRfMode(),e.MqttMode=getMQTTMode(),e.WsMode=getWsMode(),e.vTOffs=parseFloat(document.getElementById("vTOffs").value);const t=document.createElement("a"),n=new Blob([JSON.stringify(e)],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="settings.json",t.click()}function sendValues(){if(!checkValues())return;doSendData(["setView","board","Frequ","disp","dispRot","type","mode","fntMode","fntPin","PilotName","expwsw","fuelSensor","AUTOUPDATE"],1),doSendData(["gslat","gslon","gsalt","gsGeoAlt","gsScr","gsPs","GsSrO","GsSsO","MinBatPerc","restartBattPerc"],1),doSendData(["wdAnemo","wdAnemoAdsGain","wdAnemoAdsWSpeedMinVoltage","wdAnemoAdsWSpeedMaxVoltage","wdAnemoAdsWDirMinVoltage","wdAnemoAdsWDirMaxVoltage","wdAnemoAdsWSpeedMinSpeed","wdAnemoAdsWSpeedMaxSpeed","wdAnemoAdsWDirMinDir","wdAnemoAdsWDirMaxDir","wdAnemoAdsVDivR1","wdAnemoAdsVDivR2"],1);var t,e={};e.F2WuF=[FntIdHex2Dec(_value("F2WuF0")).toString(),FntIdHex2Dec(_value("F2WuF1")).toString(),FntIdHex2Dec(_value("F2WuF2")).toString(),FntIdHex2Dec(_value("F2WuF3")).toString(),FntIdHex2Dec(_value("F2WuF4")).toString()],e.F2WuI=[_value("F2WuI0"),_value("F2WuI1"),_value("F2WuI2"),_value("F2WuI3"),_value("F2WuI4")],e.F2WuK=[_value("F2WuK0"),_value("F2WuK1"),_value("F2WuK2"),_value("F2WuK3"),_value("F2WuK4")],e.F2WiF=[FntIdHex2Dec(_value("F2WiF0")).toString(),FntIdHex2Dec(_value("F2WiF1")).toString(),FntIdHex2Dec(_value("F2WiF2")).toString(),FntIdHex2Dec(_value("F2WiF3")).toString(),FntIdHex2Dec(_value("F2WiF4")).toString()],e.F2WiI=[_value("F2WiI0"),_value("F2WiI1"),_value("F2WiI2"),_value("F2WiI3"),_value("F2WiI4")],e.F2WiK=[_value("F2WiK0"),_value("F2WiK1"),_value("F2WiK2"),_value("F2WiK3"),_value("F2WiK4")],e.save=1,doSend(JSON.stringify(e)),doSendData(["appw","wificonnect","ssid","password","wifioff"],1),doSendData(["output","oSERIAL","oGPS","oFlarm","oFanet","oVario","awlive","UDPServerIP","UDPSendPort"],1),doSendData(["traccar_live","traccarsrv","sigmaP","sigmaA","vSinkTh","vClimbTh","vNClimbSens","vVol","vBeepFly","useMPU"],1),e={ognlive:getOGNMode(),WIFI_MODE:getWifiMode(),RFM:getRfMode(),MqttMode:getMQTTMode(),WsMode:getWsMode(),vTOffs:parseFloat(document.getElementById("vTOffs").value),save:1},doSend(JSON.stringify(e)),doSendData(["axOffset","ayOffset","azOffset","gxOffset","gyOffset","gzOffset","t[0]","z[0]"],1),doSendData(["sFWD","wdTempOffset","wdWDirOffset","WUUlEnable","WUUlID","WUUlKEY","WIUlEnable","WIUlID","WIUlKEY","WFFNT","WIFNT","WFWU","WIWU"],1),doSendData(["MqttServer","MqttPort","MqttPw"],1),doSendData(["GSMAPN","GSMUSER","GSMPWD","GSMMODE","GSMPREF","NBIOT","CATM"],2,noType),document.getElementById("btnsave").innerText="rebooting ...",t=1e4,setTimeout(callMainPage,t)}function parseJson(e){var t,s,o,i,n=JSON.parse(e);for(t of Object.keys(n)){console.log(t+" -> "+n[t]);let e=Array.isArray(n[t]);if(Array.isArray(n[t])){o=0;for(i of n[t])(t=="F2WuF"||t=="F2WiF")&&(i=FntIdDec2Hex(i)),document.getElementById(t+o).value=i,document.getElementById(t+o).textContent=i,o++;continue}if(t=="WsMode"){wsMode=n[t];continue}if(t=="bHasVario"){bHasVario=n[t];continue}if(t=="bHasMPU"){n[t]==0&&(document.getElementById("VisMPU").style.display="none");continue}if(t=="bHasGSM"){n[t]==0&&(document.getElementById("VisGSM").style.display="none");continue}if(t=="configGPS"){setBtnGPS(n[t]);continue}if(t=="getGpsPos"){setBtnGetGpsPos(n[t]);continue}if(t=="calibGyro"){setBtnCalib("btnCalibGyro",n[t]);continue}if(t=="RFM"){setRfMode(n[t]);continue}if(t=="ognlive"){setOGNMode(n[t]);continue}if(t=="WIFI_MODE"){setWifiMode(n[t]);continue}if(t=="MqttMode"){setMQTTMode(n[t]);continue}if(t=="calibAcc"){calibBtnState=n[t],setBtnCalib("btnCalibAcc",n[t]);continue}if(t=="stateCalibAcc"){setCalibState(n[t]);continue}if(t=="useMPU"&&n[t]==0&&(document.getElementById("VisMPU").style.display="none"),s=document.getElementById(t),s==null)continue;s instanceof HTMLSelectElement?document.getElementById(t).value=n[t]:s instanceof HTMLInputElement&&s.getAttribute("type")=="checkbox"?n[t]==1?document.getElementById(t).checked=!0:document.getElementById(t).checked=!1:(document.getElementById(t).textContent=n[t],document.getElementById(t).value=n[t])}setVis()}function onMessage(e){console.log("Received: "+e.data),parseJson(e.data)}</script><script src=scripts.js></script><div style=text-align:left;display:inline-block;color:#eaeaea;min-width:340px><div style=text-align:center;color:#eaeaea><noscript>JavaScript aktivieren um GXAirCom benutzen zu können<br></noscript><h1 id=appname></h1><h3 id=buildDate></h3><h3 id=pilot></h3><h3 id=myIP></h3></div><fieldset><legend><b>General settings</b></legend><table style=width:100%><tbody><tr><th>settings view<td><select onchange=setVis() id=setView><option value=0>basic<option value=100>advanced<option value=200>expert</select><tr><th>Board Type<td><select id=board><option value=0>TTGO T-Beam T22_V1.0 / T22_V1.1<option value=2>TTGO T-Beam T22_V07<option value=3>TTGO LORA T3_V1.6 (V2 1.6)<option value=5>TTGO T-Beam SX1262<option value=1>HELTEC / TTGO LORA<option value=4>TTGO T-SIM7000G<option value=6>TTGO TCall SIM800L<option value=7>HELTEC Wireless Stick Lite<option value=8>HELTEC Wireless Stick<option value=10>HELTEC Wireless Stick Lite V3<option value=9>Lilygo T-Beam-S3CORE<option value=11>HELTEC Lora V3<option value=12>HELTEC Airmodule<option value=255>unknown</select><tr id=VisFrequ><th>CPU Frequency<td><select id=Frequ><option value=240>240MHz<option value=160>160MHz<option value=80>80MHz<option value=40>40MHz<option value=20>20MHz<option value=10>10MHz</select><tr><th>Display Type<td><select onchange=setVis() id=disp><option value=0>no display<option value=1>0.96' OLED<option value=2>2.9' E-Ink<option value=3>2.9' E-Ink V2</select><tr><th>Display Rotation<td><select id=dispRot><option value=0>0&deg;<option value=1>90&deg;<option value=2>180&deg;<option value=3>270&deg;</select><tr><th>operating-mode<td><select onchange=setVis() id=mode><option value=0>AIR-Module<option value=1>Ground-Station</select><tr id=VisOwnWs><th>ground-station is weather-station<td><input onchange=setWsMode() type=checkbox id=wdModeEnable><tr><th id=tName>PilotName<td><input id=PilotName><tr id=VisBattOffs><th>Battery Voltage calib<td><input id=vBatt disabled><td><input type=number onchange=setBattVoltOffs() id=BATOFFS min=-1.00 max=1.00 step=0.01><tr id=VisAirCraftType><th>Aircraft Type<td><select id=type><option value=0>Unknown<option value=1>Paraglider<option value=2>Hangglider<option value=3>Balloon<option value=4>Glider<option value=5>Powered Aircraft<option value=6>Helicopter<option value=7>UAV</select><tr id=VisExtPowerSw><th>external power swtich (pin36) only for kobo<td><input type=checkbox id=expwsw><tr id=VisFuelSensor><th>Fuel-sensor available<td><input type=checkbox id=fuelSensor><tr id=VisAutoUpdate><th>automatic update over Internet<td><input type=checkbox id=AUTOUPDATE></table></fieldset><p><p><fieldset><legend><b>RF-Module settings</b></legend><table style=width:100%><tbody><tr><th>FANET RX (receiving Fanet-MSG)<td><input type=checkbox id=FntRx><tr><th>FANET TX (sending Fanet-MSG)<td><input type=checkbox id=FntTx><tr><th>Flarm RX (receiving Flarm-MSG)<td><input type=checkbox id=FlarmRx><tr><th>Flarm TX (sending Flarm-MSG)<td><input type=checkbox id=FlarmTx><tr id=VisFanetTracking><th>fanet-tracking-mode<td><select id=fntMode><option value=0>switch between ground-/air-tracking<option value=1>always air-tracking</select><tr><th>fanet Pin for fanet-commands<td><input type=number id=fntPin min=0000 max=9999 step=1></table></fieldset><p><p><fieldset><legend><b>Open Glider Network (OGN)</b></legend><table style=width:100%><tbody><tr><th>send live-tracking<td><input type=checkbox id=ognlive><tr><th>send my weatherdata<td><input type=checkbox id=ognWeather><tr><th>send received-weatherdata<td><input type=checkbox id=ognFwdWeather><tr><th>send received FANET-Names<td><input type=checkbox id=ognNameData></table></fieldset><p><p><fieldset><legend><b>Live tracking settings</b></legend><table style=width:100%><tbody><tr><th>airwhere live-tracking<td><input type=checkbox id=awlive><td><tr><th>Traccar Server<td><input type=checkbox id=traccar_live><td><input id=traccarsrv style=width:98% maxlength=50><td><button type=button onclick=setFts() class="button byel" style=line-height:1.7rem>FTS</button></table></fieldset><p><p><fieldset id=VisOutputSettings><legend><b>Output settings</b></legend><table style=width:100%><tbody><tr><th>output<td><select onchange=setVis() id=output><option value=0>serial<option value=1>udp<option value=3>bluetooth ble</select><tr><th>additional output over serial<td><input type=checkbox id=oSERIAL><tr><th>output GPS<td><input type=checkbox id=oGPS><td><button type=button onclick=sendUbloxConfig() id=btnGPS class="button byel" style=line-height:1.7rem>config GPS</button><tr><th>output FLARM<td><input type=checkbox id=oFlarm><tr><th>output FANET<td><input type=checkbox id=oFanet><tr><th>output Vario<td><select id=oVario><option value=0>no output<option value=1>LK8EX1<option value=2>LXWP0</select><tr id=VisUdpIp><th>UDP-IP<td><input id=UDPServerIP><tr id=VisUdpPort><th>UDP-Port<td><input type=number id=UDPSendPort></table></fieldset><p><p><fieldset><legend><b>WIFI settings</b></legend><table style=width:100%><tbody><tr><th>enable Wifi at startup<td><input type=checkbox id=wifiEn><tr><th>ACCESS-POINT Password<td><input id=appw><p><p></p><tr><th>connect to wifi:<td><select onchange=setVis() id=wificonnect><option value=0>don't connect<option value=1>try connect once<option value=2>stay connected (60sec. reconnect)</select><tr id=VisWifiApOff><th>switch AP off when Wifi connected:<td><input type=checkbox id=wifiModeApOff><tr id=VisWifiOff><th>Wifi off<td><select id=wifioff><option value=0>always on<option value=60>1min.<option value=120>2min.<option value=180>3min.<option value=300>5min.<option value=600>10min.</select><tr id=VisWifiSsid><th>WIFI SSID<td><input id=ssid><tr id=VisWifiPwd><th>WIFI Password<td><input id=password></table></fieldset><p><p><fieldset id=VisGS><legend><b>Ground station settings</b></legend><table style=width:100%><tbody><tr><th>lat [DD.dddddd] (ground-station)<td><input type=number min=-90.0 max=90.0 id=gslat><td><button type=button onclick=getGpsPos() id=btnGetGpsPos class="button byel" style=line-height:1.7rem>Get GPS-Position</button><tr><th>lon [DD.dddddd] (ground-station)<td><input type=number min=-180.0 max=180.0 id=gslon><tr><th>alt [m] (ground-station)<td><input type=number id=gsalt><tr><th>geoid-altitude [m] (ground-station)<td><input type=number id=gsGeoAlt><td><button type=button onclick=openGeoidCalc() class="button byel" style=line-height:1.7rem>calculator (use EGM84-value)</button><tr id=VisGsScreen><th>Screen option<td><select id=gsScr><option value=0>always on<option value=1>only on when traffic<option value=2>always off<option value=3>weather-data</select><tr><th>Power option<td><select onchange=setVis() id=gsPs><option value=0>always on<option value=1>only on between sunrise and sunset<option value=2>battery life algorithm mode</select><tr id=VisGsSrO><th>offset sunrise [min.]<td><input type=number id=GsSrO step=1><tr id=VisGsSsO><th>offset sunset [min.]<td><input type=number id=GsSsO step=1><tr><th>min. battery capacity [%]<td><input type=number id=MinBatPerc min=0 max=50 step=1><tr><th>additional battery capacity for restart [%]<td><input type=number id=restartBattPerc min=10 max=100 step=1></table></fieldset><p><p><fieldset id=VisWD><legend><b>Weather-Station settings</b></legend><table style=width:100%><tbody><tr><th>Anemometer<td><select id=wdAnemo onchange=setVis()><option value=0>DAVIS 6410<option value=1>Technoline TX20<option value=2>ADS1015<option value=3>PEETBROS</select><tr><th>offset wind direction [°]<td><input type=number id=wdWDirOffset step=1><tr><th>BME280<td><input onchange=setWsMode() type=checkbox id=wdModeHasBME><tr><th>DS18B20<td><input onchange=setWsMode() type=checkbox id=wdModeDS18B20><tr id=VisWDBme><th>offset Temperature [K]<td><input type=number id=wdTempOffset step=.5><tr><th>rain-sensor avaiable<td><input onchange=setWsMode() type=checkbox id=wdModeRainSensor><tr><th>send weather-data over FANET<td><input type=checkbox id=sFWD></table></fieldset><p><p><fieldset id=VisADS1015><legend><b>ADS1015 related settings.</b> Set min/max Voltage to the same value to disable sensor.</legend><table style=width:100%><tbody><tr><th>ADS1015 Gain<td><select id=wdAnemoAdsGain><option value=0>0<option value=1>1<option value=2>2<option value=4>4<option value=8>8<option value=16>16</select></table><table style=width:100%><tbody><tr><th><th>min<th>max<tr><td>Wind Speed Voltage<td><input type=number id=wdAnemoAdsWSpeedMinVoltage><td><input type=number id=wdAnemoAdsWSpeedMaxVoltage><tr><td>Wind Speed km/h<td><input type=number id=wdAnemoAdsWSpeedMinSpeed><td><input type=number id=wdAnemoAdsWSpeedMaxSpeed><tr><td>Wind Direction Voltage<td><input type=number id=wdAnemoAdsWDirMinVoltage><td><input type=number id=wdAnemoAdsWDirMaxVoltage><tr><td>Wind Direction Degrees<td><input type=number id=wdAnemoAdsWDirMinDir><td><input type=number id=wdAnemoAdsWDirMaxDir></table></fieldset><fieldset id=VisADS1015Exp><table style=width:100%><tbody><tr><th>ADS1015 expert settings<tr><td>Voltage Divider R1 (Ohm)<td><input type=number id=wdAnemoAdsVDivR1><tr><td>Voltage Divider R2 (Ohm)<td><input type=number id=wdAnemoAdsVDivR2></table></fieldset><p><p><fieldset id=VisGSUpload1><legend><b>Upload received Fanet weather-data to weather undergound</b></legend><table style=width:100%><tbody><tr><th>FANET-ID<th>ID<th>KEY<tr><td><input id=F2WuF0><td><input id=F2WuI0><td><input id=F2WuK0><tr><td><input id=F2WuF1><td><input id=F2WuI1><td><input id=F2WuK1><tr><td><input id=F2WuF2><td><input id=F2WuI2><td><input id=F2WuK2><tr><td><input id=F2WuF3><td><input id=F2WuI3><td><input id=F2WuK3><tr><td><input id=F2WuF4><td><input id=F2WuI4><td><input id=F2WuK4></table></fieldset><p><p><fieldset id=VisGSUpload2><legend><b>Upload received Fanet weather-data to windy</b></legend><table style=width:100%><tbody><tr><th>FANET-ID<th>Station ID<th>API key<tr><td><input id=F2WiF0><td><input id=F2WiI0><td><input id=F2WiK0><tr><td><input id=F2WiF1><td><input id=F2WiI1><td><input id=F2WiK1><tr><td><input id=F2WiF2><td><input id=F2WiI2><td><input id=F2WiK2><tr><td><input id=F2WiF3><td><input id=F2WiI3><td><input id=F2WiK3><tr><td><input id=F2WiF4><td><input id=F2WiI4><td><input id=F2WiK4></table></fieldset><p><p><fieldset id=VisMqtt><legend><b>MQTT settings</b></legend><table style=width:100%><tbody><tr><th>enable<td><input type=checkbox id=MqttEn><tr><th>send my weatherdata<td><input type=checkbox id=MqttWd><tr><th>server<td><input id=MqttServer><tr><th>Port (default 1883)<td><input type=number id=MqttPort><tr><th>Password<td><input id=MqttPw></table></fieldset><p><p><fieldset id=VisAWFFNT><legend><b>FANET Weather settings</b></legend><table style=width:100%><tbody><tr id=VisAvgFNT><th>average-coefficient (default 16)<td><input type=number id=WFFNT min=0.1 max=2000><tr><th>send-interval [s] (default 40)<td><input type=number id=WIFNT min=5 max=15000></table></fieldset><p><p><fieldset id=VisAWUS><legend><b id=tWdUpload>Weather Upload settings</b></legend><table style=width:100%><tbody><tr id=VisAvgWD><th>average-coefficient (default 128)<td><input type=number id=WFWU min=0.1 max=2000><tr><th id=tWuIntervall>upload-interval [s] (default 300 -> 5min)<td><input type=number id=WIWU min=30 max=1800000></table></fieldset><p><p><fieldset id=VisWU><legend id=tWu><b>Weather Underground Upload</b></legend><table style=width:100%><tbody><tr><th id=tWuEnable>enable sending weather-data to WU<td><input type=checkbox id=WUUlEnable><tr><th>ID<td><input id=WUUlID><tr><th id=tWuKey>KEY<td><input id=WUUlKEY></table></fieldset><p><p><fieldset id=VisWI><legend id=tWi><b>windy Upload</b></legend><table style=width:100%><tbody><tr><th id=tWi2>enable sending weather-data to windy<td><input type=checkbox id=WIUlEnable><tr><th>stationid<td><input id=WIUlID><tr><th>API-KEY<td><input id=WIUlKEY></table></fieldset><p><p><fieldset id=VisVario><legend><b>Vario settings</b></legend><table style=width:100%><tbody><th>climbing threshold [m/s]<td><input type=number id=vClimbTh step=.01><tr><th>near climbing sensitivity [m/s]<td><input type=number id=vNClimbSens step=.01><tr><th>sinking threshold [m/s]<td><input type=number id=vSinkTh step=.01><tr><th>volume<td><select id=vVol><option value=50>Low<option value=80>MID<option value=127>HIGH</select><tr><th>beep only when flying<td><input type=checkbox id=vBeepFly><tr><th>offset Temperature [K]<td><input type=number id=vTOffs step=.5><tr id=VisMPUSetting><th>use accelerometer<td><input type=checkbox id=useMPU onchange=setVis()><tr><tr id=visSigmaP><th id=KfP>Kalman filter pressure-value (default 0.1)<td><input type=number id=sigmaP step=.01><tr id=visSigmaA><th id=KfA>Kalman filter accelerator-value (default 0.6)<td><input type=number id=sigmaA step=.01></table></fieldset><p><p><fieldset id=VisMPU><legend><b>accelerometer settings</b></legend><table style=width:100%><tbody><tr><th>acc-sensor<td id=visAxOffset><input type=number id=axOffset step=1><td id=visAyOffset><input type=number id=ayOffset step=1><td id=visAzOffset><input type=number id=azOffset step=1><td><button type=button onclick=calibAcc() id=btnCalibAcc class="button byel" style=line-height:1.7rem>calib</button><tr id=accCalib1><th><td id=X1 style=text-align:center>X1<td id=Z1 style=text-align:center>Z1<td id=X2 style=text-align:center>X2<tr id=accCalib2><th><td><td id=Y1 style=text-align:center>Y1<tr id=accCalib3><th><td><td id=Z2 style=text-align:center>Z2<tr id=accCalib4><th><td><td id=Y2 style=text-align:center>Y2<tr id=visAccTemp1><th>acc-sensor Temp [°C]<td><input type=number id=t[0] step=0.1><tr id=visAccTemp2><th>acc-sensor Z-Offset<td><input type=number id=z[0] step=1><tr><th>gyro-sensor<td id=visGxOffset><input type=number id=gxOffset step=1><td id=visGyOffset><input type=number id=gyOffset step=1><td id=visGzOffset><input type=number id=gzOffset step=1><td><button type=button onclick=calibGyro() id=btnCalibGyro class="button byel" style=line-height:1.7rem>calib</button></table></fieldset><p><p><fieldset id=VisGSM><legend><b>GSM settings</b></legend><table style=width:100%><tbody><tr><th>APN<td><input id=GSMAPN><tr><th>USER<td><input id=GSMUSER><tr><th>PWD<td><input id=GSMPWD><tr><th>Network-Mode<td><select id=GSMMODE><option value=2>automatic<option value=13>GSM only<option value=38>LTE only<option value=51>GSM and LTE only</select><tr><th>Network-Preference<td><select id=GSMPREF><option value=0>don't set<option value=1>CAT-M<option value=2>NB-IOT<option value=3>CAT-M and NB-IOT</select><tr><th>NB-IOT Band (leave empty for all bands)<td><input id=NBIOT><tr><th>CAT_M Band (leave empty for all bands)<td><input id=CATM></table></fieldset><p><p><table style=width:100%><tr><td style=width:50%><button id=btnsaveSettings onclick=exportJson()>save settings to file</button><td style=width:50%><button id=btnloadSettings class="button byel" onclick='document.getElementById("importJson").click()'>load settings from file</button>
<input id=importJson value="import json" onchange=importJson() type=file accept=application/json style=display:none></table><p><p><table style=width:100%><tr><td style=width:100%><button id=btnsave onclick=sendValues() class="button bgrn">save settings on board and reboot</button></table><p><p><table style=width:100%><tr><td style=width:100%><button onclick='location.href="/index.html"'>main menu</button></table><p><div style=text-align:right;font-size:11px><hr><a href=https://www.getronix.at target=_blank style=color:#aaa>GXAirCom by Gerald Eichler</a></div></div>