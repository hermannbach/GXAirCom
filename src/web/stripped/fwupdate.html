<!doctype html><link rel=stylesheet href=style.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>GXAirCom</title><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js></script><script language=javascript>var pageNumber=5,UpdState=0,newVersion="";function onMessage(e){console.log("Received: "+e.data);var t,s,n=JSON.parse(e.data);for(t of Object.keys(n)){if(console.log(t+" -> "+n[t]),t=="updateState"){UpdState=n[t];continue}if(t=="nVers"){newVersion=n[t];continue}if(s=document.getElementById(t),s==null)continue;s instanceof HTMLSelectElement?document.getElementById(t).value=n[t]:s instanceof HTMLInputElement&&s.getAttribute("type")=="checkbox"?n[t]==1?document.getElementById(t).checked=!0:document.getElementById(t).checked=!1:(document.getElementById(t).textContent=n[t],document.getElementById(t).value=n[t])}setUpdateState()}function setUpdateState(){switch(e=document.getElementById("updstate"),UpdState){case 0:e.value="";break;case 1:e.value="checking for new Version";break;case 2:e.value="no new Version avaiable.";break;case 10:document.getElementById("btnOnlineUpdate").innerText="update",e.value="new Version: "+newVersion;break;case 200:document.getElementById("btnOnlineUpdate").innerText="ready",e.value="update completed",document.getElementById("btnUpdate").innerText="rebooting ...";var t=5e3;setTimeout(callMainPage,t);break;case 255:document.getElementById("btnOnlineUpdate").innerText="Check for new Version",e.value="update error",document.getElementById("btnUpdate").innerText="rebooting ...",t=5e3,setTimeout(callMainPage,t);break;default:break}}function btnUpdClick(){UpdState==10?(UpdState=100,document.getElementById("updstate").value="update is running, please wait",document.getElementById("btnOnlineUpdate").innerText="updating"):UpdState=1;var e={updateState:UpdState};doSend(JSON.stringify(e)),setUpdateState()}</script><script src=scripts.js></script><div style=text-align:left;display:inline-block;color:#eaeaea;min-width:340px><div style=text-align:center;color:#eaeaea><noscript>JavaScript aktivieren um GXAirCom benutzen zu k√∂nnen<br></noscript><h1 id=appname></h1><h3 id=buildDate></h3><h3 id=pilot></h3><h3 id=myIP></h3></div><fieldset><legend><b>upgrade by file upload</b></legend>1. Download latest version from <a href=https://github.com/gereic/GXAirCom/tree/master/bin target=_blank>https://github.com/gereic/GXAirCom/tree/master/bin</a><br>1. Search and select "firmware_xxx.bin"<br>3. start upgrade<br>3. Search and select "spiffs_xxx.bin"<br>5. start upgrade<br><form method=post action=/fwupdate enctype=multipart/form-data id=upload_form><br><input type=file name=update required><br><br><button id=btnUpdate>start upgrade</button></form><div id=prg>progress: 0%</div></fieldset><p><p><fieldset><legend><b>upgrade directly from internet</b></legend><table style=width:100%><tbody><tr><th>update-state:<td><input id=updstate disabled><td><button type=button id=btnOnlineUpdate onclick=btnUpdClick() class="button byel" style=line-height:1.7rem>Check for new Version</button></table></fieldset><p><p><table style=width:100%><tr><td style=width:100%><button onclick='location.href="/index.html"'>main menu</button></table><p><div style=text-align:right;font-size:11px><hr><a href=https://www.getronix.at target=_blank style=color:#aaa>GXAirCom by Gerald Eichler</a></div></div><script>function callMainPage(){window.location="/index.html"}$("form").submit(function(e){document.getElementById("btnUpdate").innerText="update is running ....",e.preventDefault();var t=$("#upload_form")[0],n=new FormData(t);$.ajax({url:"/fwupdate",type:"POST",data:n,contentType:!1,processData:!1,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;$("#prg").html("progress: "+Math.round(t*100)+"&#37;")}},!1),e},success:function(){document.getElementById("btnUpdate").innerText="rebooting ...";var n=5e3;setTimeout(callMainPage,n),console.log("success!")},error:function(){}})})</script>